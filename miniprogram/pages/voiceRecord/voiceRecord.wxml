<!-- 语音输入区域 -->
<view class="voice-input-container">
  <text class="recording-tip" wx:if="{{isAnalyzing}}">正在分析...</text>
  <view class="button-container">
    <view 
      class="voice-btn {{isRecording ? 'recording' : ''}}"
      bind:touchstart="startRecord" 
      bind:touchend="stopRecord"
    >
      <view class="mic-icon">
        <view class="wave-container" wx:if="{{isRecording}}">
          <view class="wave wave1"></view>
          <view class="wave wave2"></view>
          <view class="wave wave3"></view>
        </view>
        <van-icon name="microphone" size="48rpx" color="{{isRecording ? '#ffffff' : '#1989fa'}}"/>
      </view>
      <text class="btn-text">{{isRecording ? '松开发送' : '按住说话'}}</text>
    </view>
    <view class="voice-btn right-btn">
      <van-icon name="edit" size="48rpx" color="#1989fa"/>
      <text class="btn-text">输入文字</text>
    </view>
  </view>
</view>

<!-- 今日记录列表 -->
<recordList showTodayOnly="{{true}}" class="today-records"/>

<!-- 编辑弹窗 -->
<van-dialog
  use-slot
  title="编辑记录"
  show="{{ showDialog }}"
  showCancelButton
  bind:confirm="handleEdit"
  bind:close="closeDialog"
  custom-class="edit-dialog"
>
  <block wx:if="{{currentRecord}}">
    <view class="dialog-content">
      <view class="dialog-text">{{currentRecord.content}}</view>
      <view class="dialog-item">
        <text class="dialog-label">分类：</text>
        <van-field
          model:value="{{ editCategory }}"
          placeholder="请输入分类"
          border="{{ false }}"
          custom-class="edit-field"
        />
      </view>
      <view class="dialog-item">
        <text class="dialog-label">情感评分：</text>
        <van-rate
          value="{{ editPositive }}"
          bind:change="onRateChange"
          count="{{ 5 }}"
          size="{{ 20 }}"
        />
      </view>
    </view>
  </block>
</van-dialog> 